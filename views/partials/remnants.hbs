<!DOCTYPE html>
<div class="container">
	<md-tabs md-dynamic-height md-border-bottom md-stretch-tabs>
	<md-tab label="Remnants View">
	<!--"borrowed" from scotch.io-->
	<br>
	<form>
	  <div class="form-group">
	    <div class="input-group">
	      <div class="input-group-addon"><i class="fa fa-search"></i></div>
	      <input type="text" class="form-control" placeholder="Search Remnants" ng-model="searchRemnants">
	    </div>      
	  </div>
	</form>

	<b>Links to Manufacturer Websites for Colour Samples</b>
	<br><small>Material Colour Links - click on a name to link to the supplierâ€™s website</small>
	<br><br>
	<div style="position:relative; left:35px">
	  Acrylic Solid Surface
	  <div class="row">
	    <div class="col-md-2" ng-repeat-start="link in vm.links | filter:{type:'Acrylic'}">
	      <a href="{/link.url/}" target="_blank">{/link.name/}</a><br>
	    </div>
	    <div class="clearfix" ng-if="($index+1)%5==0"></div>
	    <div ng-repeat-end></div>
	  </div>
	  <br>
	  Quartz
	  <div class="row">
	    <div class="col-md-2" ng-repeat-start="link in vm.links | filter:{type:'Quartz'}">
	      <a href="{/link.url/}" target="_blank">{/link.name/}</a><br>  
	    </div>
	    <div class="clearfix" ng-if="($index+1)%5==0"></div>
	    <div ng-repeat-end></div>
	  </div>
	</div>
	<br>
	<button type="button" class="btn" ng-click="vm.printScreen('printScreen')">Print</button>
	<br> <br> <br>
	User Instructions:
	<br><br>
	All measurements are in inches. Click on the headings in the first row to sort by the column below - click twice to change sort from ascending to descending. If you are interested in a remnant please click on the email icon to send us an email relating to that remnant.
	<br>
	<br>
	<br>
	<br>
	<div id="printScreen">
	  <table class="table table-bordered table-striped">
	    <thead>
	      <tr>
	        <td>
	          <a href="" ng-click="vm.sortType = 'remnantID'; vm.sortReverse = !vm.sortReverse">
	            Remnant ID 
	            <span ng-show="vm.sortType == 'remnantID' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'remnantID' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	        <td>
	          <a href="" ng-click="vm.sortType = 'manufacturer'; vm.sortReverse = !vm.sortReverse">
	            Manufacturer 
	            <span ng-show="vm.sortType == 'manufacturer' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'manufacturer' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	        <td>
	          <a href="" ng-click="vm.sortType = 'remnantType'; vm.sortReverse = !vm.sortReverse">
	          Material Type 
	            <span ng-show="vm.sortType == 'remnantType' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'remnantType' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	        <td>
	          <a href="" ng-click="vm.sortType = 'colourGroup'; vm.sortReverse = !vm.sortReverse">
	          Colour Group 
	            <span ng-show="vm.sortType == 'colourGroup' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'colourGroup' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	        <td>
	          <a href="" ng-click="vm.sortType = 'description'; vm.sortReverse = !vm.sortReverse">
	          Colour 
	            <span ng-show="vm.sortType == 'description' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'description' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	        <td>
	          <a href="" ng-click="vm.sortType = 'thickness'; vm.sortReverse = !vm.sortReverse">
	          Thickness 
	            <span ng-show="vm.sortType == 'thickness' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'thickness' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	        <td>
	          <a href="" ng-click="vm.sortType = 'length'; vm.sortReverse = !vm.sortReverse">
	          Length 
	            <span ng-show="vm.sortType == 'length' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'length' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	        <td>
	          <a href="" ng-click="vm.sortType = 'width'; vm.sortReverse = !vm.sortReverse">
	          Width 
	            <span ng-show="vm.sortType == 'width' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'width' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	        <td>
	          <a href="" ng-click="vm.sortType = 'location'; vm.sortReverse = !vm.sortReverse">
	          Location 
	            <span ng-show="vm.sortType == 'location' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'location' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	        <td>
	          <a href="" ng-click="vm.sortType = 'createdAt'; vm.sortReverse = !vm.sortReverse">
	          Date Added 
	            <span ng-show="vm.sortType == 'createdAt' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'createdAt' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	        <td>
	          <a href="" ng-click="vm.sortType = 'hold'; vm.sortReverse = !vm.sortReverse">
	          Hold
	            <span ng-show="vm.sortType == 'hold' && !vm.sortReverse" class="fa fa-caret-down"></span>
	            <span ng-show="vm.sortType == 'hold' && vm.sortReverse" class="fa fa-caret-up"></span>
	          </a>
	        </td>
	      </tr>
	    </thead>
	    
	    <tbody>
	      <tr 
	        ng-repeat="remnant in vm.remnants | orderBy:vm.sortType:vm.sortReverse | filter:searchRemnants"
	        ng-class='{remnantHold : remnant.hold, remnantNotHold: !remnant.hold}'>
	        <td>{/remnant.remnantID/}</td>
	        <td>{/remnant.manufacturer/}</td>
	      	<td>{/remnant.remnantType/}</td>
	      	<td>{/remnant.colourGroup/}</td>
	      	<td>{/remnant.description/}</td>
	      	<td>{/remnant.thickness/}</td>
	      	<td>{/remnant.length/}</td>
	      	<td>{/remnant.width/}</td>
	      	<td>{/remnant.location/}</td>
	      	<td>{/remnant.createdAt | limitTo: 10/}</td>
	        <td>
	          <span ng-show="remnant.hold==true && remnant.edit!==true"><i class="fa fa-check-circle"></i></span>
	          <span ng-show="remnant.hold==false && remnant.edit!==true"><i class="fa fa-times"></i></span>
	        </td>
	        <td>
	        	<a ng-href="mailto:info@surfacingsolutions.ca?Subject=Remnant%20Request - ID {/remnant.remnantID/}" target="_blank"><i class="fa fa-envelope"></i></a>
	        	
	        </td>
	      </tr>
	    </tbody>
	  </table>
	</div>
	</md-tab>
	<md-tab ng-if="currentUser.accountType == 'admin'" label="Remnants Edit">
		<!--<pre>{/vm.remnants |json/}</pre>-->
		<button class="button" ng-click="vm.showAddRemnants = true">Add Remnants</button>
		<br>
		<span ng-show="vm.showAddRemnants">
			<form name="addMaterialForm"
			ng-submit="vm.addRemnant(addMaterialDescription); vm.showAddRemnants = !vm.showAddRemnants; addMaterialManufacturer=''; addMaterialDescription='';">
				<ul class="list-group"> 
					<li class="list-group-item">	
						Choose a Manufacturer:
						<select name="addMaterialManufacturer" ng-model="addMaterialManufacturer" ng-options="material.manufacturer for material in vm.materials | orderBy:'manufacturer' | unique: 'manufacturer'" value="{/manufacturer.manufacturer/}">
							<option value="">----Select----</option>
						</select>
					</li>
					<li ng-show="addMaterialManufacturer" class="list-group-item">	
						Choose a Description:
						<select name="addMaterialDescription" ng-model="addMaterialDescription" ng-options="material.description for material in vm.materials | filter:{manufacturer:addMaterialManufacturer.manufacturer} | orderBy:'description' | unique: 'description'" value="{/material.manufacturer/}">
							<option value="">----Select----</option>
						</select>
					</li>
					<span ng-show="addMaterialManufacturer && addMaterialDescription">
						<br>
						<table class="table">
							<tr>
								<td>Manufacturer</td>
								<td>Type</td>
								<td>Colour</td>
								<td>Description</td>
								<td>Thickness</td>
								<td>Length</td>
								<td>Width</td>
								<td>Location</td>
							</tr>
							<tr>
								<td>
									{/addMaterialDescription.manufacturer/} 
								</td>
								<td>
									{/addMaterialDescription.materialType/} 
								</td>
								<td>
									{/addMaterialDescription.colourGroup/} 
								</td>
								<td>
									{/addMaterialDescription.description/} 
								</td>
								<td>
									{/addMaterialDescription.thickness/} 
								</td>
								<td>
									<input type="text" name="length" ng-model="addMaterialDescription.length" required>
								</td>
								<td>
									<input type="text" name="width" ng-model="addMaterialDescription.width" required> 
								</td>
								<td>
									<select ng-options="index.location as index.location for index in vm.remnantsIndex track by index.location" type="text" name="location" data-ng-model="addMaterialDescription.location" required>
										<option value="">----Select----</option>
									</select>
								</td>
							</tr>
						</table>
					<span>
				</ul>
				<button type="button" ng-click="vm.showAddRemnants = !vm.showAddRemnants; addMaterialManufacturer=''; addMaterialDescription='';" class="btn btn-default">Cancel</button> 
				<input type="submit" class="btn btn-default" value="Add">
			</form> 
		</span>
		<span ng-show="!vm.remnants[0]">
			<br>There are no remnants to show!
			<br>Try adding some!
		</span>
		<span ng-hide="!vm.remnants[0]">
			<br><br>

			<table class="table table-bordered table-striped">
				<caption>Remnants List</caption>
			    <thead>
			      <tr>
			      	<td>
			          <a href="" ng-click="vm.sortType = 'remnantID'; vm.sortReverse = !vm.sortReverse">
			            Remnant ID 
			            <span ng-show="vm.sortType == 'remnantID' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'remnantID' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			          <a href="" ng-click="vm.sortType = 'manufacturer'; vm.sortReverse = !vm.sortReverse">
			            Manufacturer 
			            <span ng-show="vm.sortType == 'manufacturer' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'manufacturer' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			          <a href="" ng-click="vm.sortType = 'remnantType'; vm.sortReverse = !vm.sortReverse">
			          Material Type 
			            <span ng-show="vm.sortType == 'remnantType' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'remnantType' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			          <a href="" ng-click="vm.sortType = 'colourGroup'; vm.sortReverse = !vm.sortReverse">
			          Colour Group 
			            <span ng-show="vm.sortType == 'colourGroup' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'colourGroup' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			          <a href="" ng-click="vm.sortType = 'description'; vm.sortReverse = !vm.sortReverse">
			          Colour 
			            <span ng-show="vm.sortType == 'description' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'description' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			          <a href="" ng-click="vm.sortType = 'thickness'; vm.sortReverse = !vm.sortReverse">
			          Thickness 
			            <span ng-show="vm.sortType == 'thickness' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'thickness' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			          <a href="" ng-click="vm.sortType = 'length'; vm.sortReverse = !vm.sortReverse">
			          Length 
			            <span ng-show="vm.sortType == 'length' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'length' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			          <a href="" ng-click="vm.sortType = 'width'; vm.sortReverse = !vm.sortReverse">
			          Width 
			            <span ng-show="vm.sortType == 'width' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'width' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			          <a href="" ng-click="vm.sortType = 'location'; vm.sortReverse = !vm.sortReverse">
			          Location 
			            <span ng-show="vm.sortType == 'location' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'location' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			          <a href="" ng-click="vm.sortType = 'createdAt'; vm.sortReverse = !vm.sortReverse">
			          Date Added 
			            <span ng-show="vm.sortType == 'createdAt' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'createdAt' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			          <a href="" ng-click="vm.sortType = 'hold'; vm.sortReverse = !vm.sortReverse">
			          Hold
			            <span ng-show="vm.sortType == 'hold' && !vm.sortReverse" class="fa fa-caret-down"></span>
			            <span ng-show="vm.sortType == 'hold' && vm.sortReverse" class="fa fa-caret-up"></span>
			          </a>
			        </td>
			        <td>
			        	<!--Padding for Edit/Remove-->
			        </td>
			      </tr>
			    </thead>
				<tr ng-repeat="remnant in vm.remnants | orderBy:vm.sortType:vm.sortReverse track by $index">
					<td>
						{/remnant.remnantID/} 
					</td>
					<td>
						{/remnant.manufacturer/} 
					</td>
					<td>
						{/remnant.remnantType/} 
					</td>
					<td>
						{/remnant.colourGroup/} 
					</td>
					<td>
						{/remnant.description/} 
					</td>
					<td>
						{/remnant.thickness/} 
					</td>
					<td>
						<span ng-hide="remnant.edit==true">{/remnant.length/}</span>
						<span ng-show="remnant.edit==true"><input type="text" name="length" ng-value="remnant.length" ng-model="vm.edit.length"></span>
					</td>
					<td>
						<span ng-hide="remnant.edit==true">{/remnant.width/}</span>
						<span ng-show="remnant.edit==true"><input type="text" name="width" ng-value="remnant.width" ng-model="vm.edit.width"></span>
					</td>
					<td>
						<span ng-hide="remnant.edit==true">{/remnant.location/}</span>
						<span ng-show="remnant.edit==true">
							<select  
								ng-init="vm.edit.location = remnant.location"  
								ng-options="index.location as index.location for index in vm.remnantsIndex | orderBy: 'location'" 
								type="text" 
								name="location" 
								ng-model="vm.edit.location">
								<option value="">----Select----</option>
							</select>
					</td>
					<td>
						{/remnant.createdAt | limitTo: 10/}
					</td>
					<td>
						<span ng-show="remnant.hold==true && remnant.edit!==true"><i class="fa fa-check-circle"></i></span>
						<span ng-show="remnant.hold==false && remnant.edit!==true"><i class="fa fa-times"></i></span>
						<span ng-show="remnant.edit==true">
							<input type="checkbox" ng-model="remnant.hold">
						</span>	
					</td>
					<td>
						<span ng-hide="remnant.edit==true">
							<a ng-click="vm.removeRemnant($index)">Remove</a>
							/ <a ng-click="vm.editRemnant($index)">Edit</a>
						</span>
						<span ng-show="remnant.edit==true">
							<a ng-click="
								vm.cancelEditRemnant($index);
								vm.edit.location = remnant.location;
								vm.edit.width = remnant.width;
								vm.edit.length = remnant.length;
							">Cancel</a>
							/ <a ng-click="vm.saveEditRemnant($index, vm.edit)">Save</a>
						</span>
					</td>
				</tr>		
			</table>
		</span>
	</md-tab>
	</md-tabs>
</div>
